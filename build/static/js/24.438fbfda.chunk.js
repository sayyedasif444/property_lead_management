(this.webpackJsonpbodhi=this.webpackJsonpbodhi||[]).push([[24],{381:function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"f",(function(){return u})),r.d(t,"b",(function(){return d})),r.d(t,"e",(function(){return y})),r.d(t,"c",(function(){return m})),r.d(t,"d",(function(){return j}));var a,n=r(51),o=r.n(n),i=r(69),s=r(71),c=r.n(s),p=r(8),l=function(e,t,r){return function(){var n=Object(i.a)(o.a.mark((function n(i){var s,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={"Content-Type":"application/json"},l=e,n.next=4,c()({method:"POST",url:p.a+"property/add-property",data:l,headers:s}).then((function(e){200===e.data.statuscode?(t.length>0&&i(f(t,"image",e.data.data)),r.length>0&&i(f(r,"video",e.data.data)),i({type:p.L,payload:{isError:!0,isErrorType:"SUCCESS",errMessage:e.data.message}}),clearTimeout(a),a=setTimeout((function(){i({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3)):(i({type:p.L,payload:{isError:!0,isErrorType:"FAIL",errMessage:e.data.message}}),clearTimeout(a),a=setTimeout((function(){i({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3))})).catch((function(e){i({type:p.L,payload:{isError:!0,isErrorType:"FAIL",errMessage:"Something went wrong! Please try again later"}}),clearTimeout(a),a=setTimeout((function(){i({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3)}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},u=function(){return function(){var e=Object(i.a)(o.a.mark((function e(t){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:p.x,payload:!0}),r={"Content-Type":"application/json"},a={},e.next=5,c()({method:"POST",url:p.a+"property/list-property",data:a,headers:r}).then((function(e){200===e.data.statuscode?(t({type:p.x,payload:!1}),t({type:p.l,payload:e.data.data})):(t({type:p.x,payload:!1}),t({type:p.l,payload:[]}))})).catch((function(e){t({type:p.x,payload:!1}),t({type:p.l,payload:[]})}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(r){var n,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={"Content-Type":"application/json"},i=e,t.next=4,c()({method:"POST",url:p.a+"property/delete-property",data:i,headers:n}).then((function(e){200===e.data.statuscode?(r(u()),r({type:p.L,payload:{isError:!0,isErrorType:"SUCCESS",errMessage:e.data.message}}),clearTimeout(a),a=setTimeout((function(){r({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3)):(r({type:p.L,payload:{isError:!0,isErrorType:"FAIL",errMessage:e.data.message}}),clearTimeout(a),a=setTimeout((function(){r({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3))})).catch((function(e){r({type:p.L,payload:{isError:!0,isErrorType:"FAIL",errMessage:"Something went wrong! Please try again later"}}),clearTimeout(a),a=setTimeout((function(){r({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},y=function(e,t,r){return function(){var n=Object(i.a)(o.a.mark((function n(i){var s,l;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s={"Content-Type":"application/json"},l=e,n.next=4,c()({method:"POST",url:p.a+"property/edit-property",data:l,headers:s}).then((function(n){200===n.data.statuscode?(i(h(e.id)),t.length>0&&i(f(t,"image",n.data.data)),r.length>0&&i(f(r,"video",n.data.data)),i({type:p.L,payload:{isError:!0,isErrorType:"SUCCESS",errMessage:n.data.message}}),clearTimeout(a),a=setTimeout((function(){i({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3)):(i({type:p.L,payload:{isError:!0,isErrorType:"FAIL",errMessage:n.data.message}}),clearTimeout(a),a=setTimeout((function(){i({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3))})).catch((function(e){i({type:p.L,payload:{isError:!0,isErrorType:"FAIL",errMessage:"Something went wrong! Please try again later"}}),clearTimeout(a),a=setTimeout((function(){i({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3)}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},f=function(e,t,r){return function(){var a=Object(i.a)(o.a.mark((function a(n){var i,s;return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(i=new FormData).append("mediaType",t),i.append("property_id",r),e.forEach((function(e){i.append("files",e)})),s={"Content-Type":"application/json"},a.next=7,c()({method:"POST",url:p.a+"property/add-property-files",data:i,headers:s}).then((function(e){200===e.data.statuscode&&n(h(r))})).catch((function(e){}));case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},m=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(r){var n,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={"Content-Type":"application/json"},i=e,t.next=4,c()({method:"POST",url:p.a+"property/delete-file",data:i,headers:n}).then((function(t){200===t.data.statuscode?(r(h(e.property)),r({type:p.L,payload:{isError:!0,isErrorType:"SUCCESS",errMessage:t.data.message}}),clearTimeout(a),a=setTimeout((function(){r({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3)):(r({type:p.L,payload:{isError:!0,isErrorType:"FAIL",errMessage:t.data.message}}),clearTimeout(a),a=setTimeout((function(){r({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3))})).catch((function(e){r({type:p.L,payload:{isError:!0,isErrorType:"FAIL",errMessage:"Something went wrong! Please try again later"}}),clearTimeout(a),a=setTimeout((function(){r({type:p.L,payload:{isError:!1,isErrorType:null,errMessage:null}})}),1e3)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(r){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r({type:p.x,payload:!0}),a={"Content-Type":"application/json"},n={id:e},t.next=5,c()({method:"POST",url:p.a+"property/property-by-id",data:n,headers:a}).then((function(e){200===e.data.statuscode?r({type:p.X,payload:e.data.data}):r({type:p.X,payload:{}})})).catch((function(e){r({type:p.X,payload:{}})}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return function(){var t=Object(i.a)(o.a.mark((function t(r){var a,n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={"Content-Type":"application/json"},n={id:e},t.next=4,c()({method:"POST",url:p.a+"property/download-file",data:n,headers:a}).then((function(e){if(200===e.data.statuscode){var t=document.createElement("a");t.download=e.data.name,t.href=p.c+e.data.data,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}})).catch((function(e){}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},433:function(e,t,r){"use strict";r.r(t);var a=r(162),n=r(4),o=r(137),i=r(0),s=r(457),c=r(211),p=r(397),l=r(398),u=r(428),d=r(444),y=r(100),f=r(346),m=r(372),h=r(377),j=r(373),b=r(362),g=r(395),x=r(28),O=r(29),T=r(26),E=r(381),v=r(8),w=r(138),L=r(3),C=s.a.Meta;t.default=Object(T.b)((function(e){return{data:e.property.data,loading:e.property.loading,isError:e.property.isError,errMessage:e.property.errMessage,isErrorType:e.property.isErrorType,isAuthenticated:e.auth.isAuthenticated}}),{listProperty:E.f,deleteProperty:E.b})((function(e){var t=e.data,r=e.loading,T=e.listProperty,E=e.errMessage,_=e.isError,S=e.isErrorType,M=e.deleteProperty,P=e.isAuthenticated,A=Object(i.useState)([]),k=Object(o.a)(A,2),F=k[0],I=k[1];Object(i.useEffect)((function(){I(t.map((function(e){return Object(n.a)(Object(n.a)({},e),{},{expected_price:null!==e.expected_price?e.expected_price:0})})))}),[t]);var N=Object(i.useState)([]),D=Object(o.a)(N,2),U=D[0],X=D[1],z=Object(i.useState)(""),J=Object(o.a)(z,2),R=J[0],Y=J[1],q=Object(i.useState)([]),B=Object(o.a)(q,2),G=B[0],H=B[1];Object(i.useEffect)((function(){H(F.filter((function(e){return e.isActive})).map((function(e,t){return Object(n.a)(Object(n.a)({},e),{},{propert_id:"PROPERTY"+(t+1),expected_price:null!==e.expected_price?parseInt(e.expected_price):0})}))),te(Math.max.apply(Math,Object(a.a)(F.map((function(e){return null!==e.expected_price?parseInt(e.expected_price):0}))))/1e5)}),[F]);var K=Object(i.useState)([0,0]),Q=Object(o.a)(K,2),V=Q[0],W=Q[1];Object(i.useEffect)((function(){var e=[];e=0===V[1]?G:G.filter((function(e){return parseInt(e.expected_price)>=1e5*V[0]&&parseInt(e.expected_price)<=1e5*V[1]})),""!==R&&null!==R&&null!==G&&(e=G.filter((function(e){return null!==e.property_type&&e.property_type.toLowerCase().indexOf(R.toLowerCase())>-1||null!==e.property_location&&e.property_location.toLowerCase().indexOf(R.toLowerCase())>-1||null!==e.propert_id&&e.propert_id.toLowerCase().indexOf(R.toLowerCase())>-1||null!==e.property_locality&&e.property_locality.toLowerCase().indexOf(R.toLowerCase())>-1||null!==e.property_area&&e.property_area.toLowerCase().indexOf(R.toLowerCase())>-1}))),X(e)}),[G,R,V]),Object(i.useEffect)((function(){P&&T()}),[T,P]),Object(i.useEffect)((function(){_&&"SUCCESS"===S?c.b.success(E):_&&"FAIL"===S&&c.b.error(E)}),[_,S,E]);var Z=Object(i.useState)(null),$=Object(o.a)(Z,2),ee=$[0],te=$[1];Object(i.useEffect)((function(){W(null!==ee?[0,ee]:[0,0])}),[ee]);var re=Object(x.g)();return Object(L.jsx)("div",{children:Object(L.jsxs)(p.a,{children:[Object(L.jsx)(l.a,{sm:24,className:"border-bottom mb-3",children:Object(L.jsxs)(p.a,{children:[Object(L.jsx)(l.a,{sm:8,md:6,lg:5,className:"text-left mb-3",children:Object(L.jsx)(u.a,{placeholder:"Search",value:R,onChange:function(e){Y(e.target.value)}})}),G.length>0&&null!==ee?Object(L.jsxs)(l.a,{sm:8,md:6,lg:5,className:"text-left mb-3 pl-3",children:[Object(L.jsxs)("span",{children:["Price: ",V[0]," to ",V[1],"L"," "]}),Object(L.jsx)(d.a,{range:!0,min:0,max:ee,value:V,onChange:function(e){W(e)}})]}):Object(L.jsx)(l.a,{sm:8,md:6,lg:5,className:"text-left mb-3 pl-3"}),Object(L.jsx)(l.a,{sm:8,md:12,lg:14,className:"text-right mb-3",children:Object(L.jsx)(y.a,{type:"primary ",icon:Object(L.jsx)(h.a,{}),onClick:function(e){re.push("/app/add-property")},children:"Add Property"})})]})}),r?Object(L.jsx)("div",{className:"spin-loader",children:Object(L.jsx)(f.a,{tip:"Loading...",size:"large"})}):U.map((function(e,t){return Object(L.jsx)(l.a,{sm:24,md:12,lg:8,className:"pr-3",children:Object(L.jsx)(s.a,{style:{width:"100%"},cover:Object(L.jsx)("img",{alt:"example",src:null===e.property_media?"/img/noimage.jpg":e.property_media.filter((function(e){return"image"===e.media_type})).length>0?v.b+e.property_media.filter((function(e){return"image"===e.media_type}))[0].media_link:"/img/noimage.jpg",style:{width:"100%",height:"190px",objectFit:"cover"}}),actions:[Object(L.jsx)(m.a,{title:"Are you sure?",onConfirm:function(t){M({id:e.id,isActive:!e.isActive})},children:Object(L.jsx)(O.b,{onClick:function(e){e.preventDefault()},to:"#!",children:Object(L.jsx)(j.a,{className:"text-danger"},"Delete")})}),Object(L.jsx)(O.b,{onClick:function(t){t.preventDefault(),w.a.dispatch({type:v.X,payload:e}),re.push("/app/edit-property")},to:"#!",children:Object(L.jsx)(b.a,{className:"text-success"},"edit")}),Object(L.jsx)(O.b,{onClick:function(t){t.preventDefault(),w.a.dispatch({type:v.X,payload:e}),re.push("/app/view-property")},to:"#!",children:Object(L.jsx)(g.a,{className:"text-primary"},"Download")})],children:Object(L.jsx)(C,{title:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("span",{children:"#"+e.propert_id}),Object(L.jsx)("small",{className:"float-right",children:e.createdAt.substr(0,10).split("-").reverse().join("-")})]}),description:Object(L.jsxs)(L.Fragment,{children:[Object(L.jsx)("p",{className:"float-left mb-0 pb-0 w-100 text-capitalize",children:e.property_location}),Object(L.jsx)("div",{style:{width:"60%",float:"left"},children:null!==e.user?e.user.first_name+" "+e.user.last_name:""}),Object(L.jsxs)("div",{className:"text-right",style:{width:"40%",float:"left"},children:["Price:"," ",null!==e.expected_price?e.expected_price:""]})]})})})},t)}))]})})}))}}]);
//# sourceMappingURL=24.438fbfda.chunk.js.map